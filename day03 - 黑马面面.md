# day03 - é»‘é©¬é¢é¢

## åé¦ˆ

1. è€å¸ˆéå¸¸å¥½ï¼Œæ™šè‡ªä¹ è¿˜åœ¨ï¼Œè™½ç„¶æˆ‘æ²¡æœ‰é—®é¢˜ï¼Œè¿˜æ˜¯å¾ˆæ„ŸåŠ¨ã€‚
2. æˆ‘ç»å¸¸åœ¨å¤œæ™šç¡è§‰ä¸ç€,çˆ±çœ‹ç€æ˜Ÿæ˜Ÿä¸è¯´è¯,ä½ è¦ä¸è¦ä¸€èµ·å•Š
3. å–œæ¬¢é£é£è€å¸ˆ
4. é£é£ä¹Ÿå¤ªæ•¬ä¸šäº†è¶´
5. PCç«¯åªæœ‰å…«å¤©,ä¼šä¸ä¼šè®²çš„å¾ˆèµ¶ï¼Ÿæ„Ÿè§‰æ¯å¤©æ—¶é—´éƒ½å¥½ç´§å¼ 
6. é£å“¥ï¼Œä»¥åå·¥ä½œäº†éƒ½æ˜¯ç”¨vueè„šæ‰‹æ¶å†™ä»£ç å—ï¼Œå‰é¢é¡¹ç›®éƒ½å¿˜çš„å·®ä¸å¤šäº†(;Â´à¼àº¶Ù¹à¼àº¶`)
   1.	è„šæ‰‹æ¶
     1.è€é¡¹ç›®  jquery  ç»´æŠ¤     php    jsp   
7. æ…¢æ…¢å¸æ”¶èƒ½å­¦ä¼š,ä½†æ˜¯åˆè·Ÿä¸ä¸Šä¸Šè¯¾çš„é€Ÿåº¦.æ€ä¹ˆåŠå•Š,ä¸æ­¢æ˜¯ç°åœ¨çš„å†…å®¹,åŒ…æ‹¬ä»¥å‰çš„å­¦ä¹ çŠ¶æ€ä¹Ÿæ˜¯è¿™æ ·,å¤ªè¢«åŠ¨äº†,æœ‰æ•‘å—æœ‰æ›´å¤šçš„å­¦ä¹ æ–¹æ³•å—
   1. å­¦ä¹ è¾ƒå·®çš„å‡ ä¸ªäºº
      1. åšä¸åˆ°é›†ä¸­ç²¾åŠ›å¬åŠ›
      2. å†å²:æ²¡æœ‰ä»»ä½•ç¼–ç¨‹
8. æ„Ÿè§‰å•¥ä¹Ÿæ²¡å­¦åˆ°å®³
9. é£é£ N B ~~~ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
10. æ¥¼ä¸Šè¯´çš„å¯¹
11. æˆ‘å‘ç°äº†,åœ¨é»‘é©¬è¶Šä¸éªšçš„è€å¸ˆæ•™å¾—è¶Šå¤š
    1. åˆ©ç¾¤
    2. å‘¨æ—æ—
    3. å¤å“¥
    4. â€‹
12. å½“è¿™ä¸ªç”·äººåœ¨å¤œå¹•é™ä¸´çš„æ—¶å€™æ­¥å…¥ç¯ç«è¾‰ç…Œçš„æ•™å¸ˆ,éšç€åŒå­¦ä»¬çš„å°–å«å£°,æˆ‘ä»¿ä½›å¬åˆ°äº†ç‹‚çƒ­çš„ç²‰ä¸åœ¨ä¹è§åˆ°å¶åƒæ—¶çš„é«˜å‘¼ "å¼ æ°,å¼ æ°" æˆ‘çŸ¥é“,è¿™ä¸ªç”·äººä¿˜è™äº†ä»–ä»¬çš„å¿ƒ,è¿™ä¸€åˆ»,ä»–è·å¾—äº†å…¨ç­ç”·ç”Ÿçš„æ‹©å¶æƒ. (æ±‚æ±‚ä»£ç æ³¨é‡Šæ—¶æ³¨æ„ä¸‹ç¬¦å·çš„æ’ç‰ˆ,å¼ºè¿«ç—‡è¡¨ç¤ºå¿ƒæ€è¢«ç‚¸äº†)
13. è€å¸ˆå¾ˆå¥½ ,æ•™å­¦ååˆ†æœ‰è€å¿ƒ,å¸Œæœ›åé¢è¶Šå­¦è¶Šå¥½!
14. è€å¸ˆï¼Œå¯ä»¥è®²è§£ä¸‹ä»€ä¹ˆæƒ…å†µä¸‹ä¼šåˆ†æ”¯åˆå¹¶å¤±è´¥ï¼Œä»¥åŠå¦‚æœé‡åˆ°è¿œç¨‹ä»“ç®¡masteråˆ†æ”¯å’Œæœ¬åœ°ä»“åº“å†²çªæ— æ³•pullæˆ–pushçš„æƒ…å†µè¯¥å¦‚ä½•è§£å†³å—?
15. æˆ‘è¯´çš„å¯¹
16. æ¥¼ä¸Šæ¥¼ä¸‹éƒ½è¯´å¾—å¯¹ï¼
17. è€å¸ˆå¤ªå¥½äº†ï¼Œè¿˜é™ªæˆ‘ä»¬ä¸Šæ™šè‡ªä¹ ï¼Œä¸å¥½å¥½æ•²ä»£ç éƒ½å¯¹ä¸èµ·è€å¸ˆäº†ï¼Œå…„å¼Ÿä»¬å†²åŠ æ²¹æ•²ä»£ç 
    1. æ¯å¤©ç¢°åˆ° æ–°çŸ¥è¯†ç‚¹
       1. ç†è§£ 
          1. v-for
       2. è®°ä½
          1. å®¹æ˜“å¿˜è®°
             1. æ‰‹æœºè®°å½•ä¸‹æ¥,æ™šä¸Šç¡è§‰å‰è¿‡ä¸€æ¬¡,è¿‡äºŒæ¬¡,ç¬¬äºŒå¤©æ—©ä¸Šèµ·åºŠå‰ è¿‡ä¸€åˆ°äºŒæ¬¡
             2. æœ‰äº›ç‚¹å·²çŸ¥é“,å¯ä»¥åˆ é™¤  gitå‘½ä»¤
             3. å¿ƒç†å­¦:8å°æ—¶
18. æŒ«æŠ˜è°‹é¢éåäº‹ï¼Œäººç”Ÿæˆé•¿åœ¨è¿™æ—¶ï¼›å¤±è´¥ä¸´é—¨ééœ‰äº‹ï¼Œæ™ºæ…§å¢æ·»åœ¨ä»Šæ—¶ï¼›ç¬‘å¯¹äººç”Ÿä¸é¡ºäº‹ï¼Œäººç”Ÿå¹¸äº‹ä¸è¿œæœŸï¼›ä¹çœ‹å¤©ä¸‹å›°éš¾äº‹ï¼Œè«æ„å‰æ–¹è¾‰ç…Œç¨€ã€‚
19. è€å¸ˆæ™šä¸Šä¹Ÿæ¥ çœŸçš„è¾›è‹¦äº† å°±æ˜¯é¢„ä¹ çš„ç¬”è®°çœŸçš„çœ‹ä¸æ‡‚.èƒ½å¦å‘è§†é¢‘é¢„ä¹ , æˆ‘ä¿è¯ç¬¬äºŒå¤©ä¼šè®¤çœŸå¬
    1. å‘äº†è§†é¢‘åè€Œä¸å­¦
20. nice
21. æ¯å¤©äº¿ä¸ªå°çŸ¥è¯†,æ”¶è·æ»¡æ»¡
22. å†²å†²å†²
23. loading.....
24. è€å¸ˆå¾ˆæ£’å¾ˆè´´å¿ƒå¾ˆæ•¬ä¸šå¾ˆnice
25. æ•™å­¦è´¨é‡é«˜ï¼Œè¡¨è¾¾èƒ½åŠ›è¶…ç¾¤ï¼ŒæŒ‡å¯¼å­¦ç”Ÿæ­¥éª¤æ¸…æ™°ï¼Œè§£å†³å­¦ç”Ÿé—®é¢˜å¿«å‡†ï¼Œäººé«˜è‚¤ç™½èº«æå¥½ï¼ä¼˜ç§€ï¼ï¼ï¼
26. å¥¥é‡Œç»™ï¼Œä½ æˆåŠŸå¼•èµ·äº†æˆ‘çš„æ³¨æ„ï¼
27. æœ‰ä¸€è¯´ä¸€,è€å¸ˆè®²çš„å¾ˆè¯¦ç»†ğŸ˜„
    1. æŠŠé—æ¼ç‚¹è®°ä¸‹æ¥
28. æ„Ÿè§‰é£å“¥çš„å£°éŸ³æŒºå¥½å¬çš„
29. Vue.use()æ³¨å†Œæœ‰ä»€ä¹ˆä½œç”¨?åº•å±‚åšäº†ä»€ä¹ˆäº‹
    1. installæ–¹æ³•
    2. router
       1. this.$router  åœ¨use    Vue.prototype.$router=router   
    3. element
       1. æŠŠelement-uiæ‰€æœ‰çš„ç»„ä»¶éƒ½åœ¨useé‡Œé¢å…¨å±€æ³¨å†Œäº†
       2. Vue.component("æ³¨å†Œå" , å¯¼å…¥çš„ç»„ä»¶å)
30. æ¥¼ä¸Šçš„é“ä»”è¯´çš„å¯¹
31. è€å¸ˆè®²å¾—éå¸¸å¥½,å¾ˆè¯¦ç»†,è¿é‡åˆ°çš„å¸¸è§çš„BUGè¿˜ç‰¹æ„å½•å±,å¤ªå–œæ¬¢äº†!! è¾›è‹¦äº†,æ™šä¸Šè¿˜è·‘è¿‡æ¥ç›‘ç£æˆ‘ä»¬å­¦ä¹ 
    1. å¹¶ä¸æ˜¯å·¥èµ„ä½çš„å…¬å¸,ä½ å°±è½»æ¾
    2. å·¥èµ„ä¿å¯†åè®®
    3. æœ‰å¯èƒ½ä½ å·¥èµ„ä½,åšçš„æ´»æ¯”å·¥èµ„é«˜çš„äººè¿˜å¤šå¾ˆå¤š
       1. æ¨¡å— æ³¨å†Œ  ----xxx
       2. è¿­ä»£  æ³¨å†ŒåŠŸèƒ½åŠ æ·±  ----xxx
32. è€å¸ˆèƒ½ä¸èƒ½å›¾è§£ä¸€ä¸‹gitçš„ å·¥ä½œåŒº-æœ¬åœ°ä»“åº“-è¿œç¨‹ä»“åº“ çš„æµç¨‹ ï¼ˆåˆå¹¶åˆ°ä¸»åˆ†æ”¯åè¿˜æœ‰è¢«åˆå¹¶çš„åˆ†æ”¯å—ï¼‰







![image-20200923085857008](day03 - é»‘é©¬é¢é¢.assets/image-20200923085857008.png)

1. æœ€ç¾çš„ä¸æ˜¯ä¸‹é›¨å¤©ï¼Œæ˜¯æ›¾ä¸ä½ ä¸€èµ·èº²è¿‡é›¨çš„å±‹æª
2. é’ˆä¸è¾ydf
3. é£é£,å3å¤©å‰æ•™å¸ˆèŠ‚å¿«ä¹
4. é£é£,è¯¾é—´è®°å¾—æ”¾æ­Œå“¦,ä»Šå¤©åˆæ˜¯å……æ»¡å¸Œæœ›çš„ä¸€å¤©
5. é£é£,æ°¸è¿œæ»´ç¥.
6. è¿™ä¸¤å¤©è¿‡å¾—è´¼å……å® ä¸‹è¯¾éƒ½æ²¡æ—¶é—´ç¡è§‰äº† é£é£çœŸæ£’
   1. 57:101äºº   58:120å¤š   59:107   å‡ å¤©æ—¶é—´,å¯èƒ½éƒ½ä¼šåŒä¸€æ—¶é—´
7. å¯èƒ½æ˜¯æˆ‘åŸºç¡€å¤ªå·®äº† ï¼ŒåƒåŠ›
8. æ­£ä¹‰éƒ½èƒ½è¿Ÿåˆ°ï¼Œæˆ‘å°±ä¸èƒ½å› ä¸ºç¡è§‰è¿Ÿåˆ°äº†ååˆ†é’Ÿå—ï¼Ÿ
   1. æ™šä¸Šå»ºè®®12ç‚¹å‰ä¸€å®šç¡è§‰
     1.è€å¸ˆæ¯å¤©éƒ½è®²çš„å¾ˆç»†,æ¯å¤©éƒ½æ˜¯å¾ˆå……å®çš„ä¸€å¤©,å¥¥é‡Œç»™!



## å›é¡¾

~~~
formè¡¨å•
    el-form   model    rules   label-width
       el-form-item   label    prop
     rules:{
     propå€¼:[
     éç©ºéªŒè¯   undefind   ""  []
     {required:true,message:"é”™è¯¯ä¿¡æ¯",trigger:"change/blur"},
     {min:æœ€å°é•¿åº¦,max:æœ€å¤§é•¿åº¦,message:"é”™è¯¯ä¿¡æ¯",trigger:"change/blur"},
     {validator:(rule,value,callback)=>{
     rule:è§„åˆ™
     value:å€¼
     callback  éªŒè¯é€šè¿‡  callback()
               éªŒè¯ä¸é€šè¿‡   callback(new Error("é”™è¯¯ä¿¡æ¯"))
     }}
     ]
     }  
 å…¨å±€è¡¨å•éªŒè¯
    è°ƒç”¨el-formç»„ä»¶ä¸Šçš„validateæ–¹æ³•
    1:el-form  model   rules ref
        el-form-item   propç»‘å®š
     2:è°ƒç”¨:this.$refs.refå€¼.validate((result)=>{
     true:éªŒè¯é€šè¿‡ false:éªŒè¯å¤±è´¥
     })
   å±€éƒ¨è¡¨å•éªŒè¯
      this.$refs.refå€¼.validateField(["propå€¼"])
   é‡ç½®è¡¨å•
      this.$refs.refå€¼.resetFields()
   ä¸Šä¼ ç»„ä»¶
      el-upload
          action:ä¸Šä¼ æ¥å£åœ°å€
          name:ä¸Šä¼ æ–‡ä»¶å¯¹åº”çš„å‚æ•°
          show-fild-list:true:æ˜¾ç¤ºåˆ—è¡¨  false:ä¸æ˜¾ç¤ºåˆ—è¡¨
          before-upload:ä¸Šä¼ å‰å¤„ç†
                 function(file){
                 file.type:æ–‡ä»¶ç±»å‹
                 file.size:æ–‡ä»¶å¤§å°(å­—èŠ‚)
                 return boolean
                     true:æ­£å¸¸ä¸Šä¼ 
                     false:ä¸­æ­¢ä¸Šä¼ 
                 }
           on-success:ä¸Šä¼ æˆåŠŸå¤„ç†
               function (res,file){
               res:æ¥å£è¿”å›å€¼
               file:  file.response:æ¥å£è¿”å›å€¼===res
                      file.raw:æ–‡ä»¶å¯¹è±¡
               }
      æ¶ˆæ¯æç¤º
      this.$message.(success/error/warning/info)("ä¿¡æ¯")
      å¯¹è¯æ¡† dialog
        el-dialog
            visible.sync:æ˜¯å¦æ˜¾ç¤ºå¯¹è¯æ¡†
            tile:æ ‡é¢˜
            width:å®½åº¦
            show-close:æ˜¯å¦æ˜¾ç¤ºå…³é—­æŒ‰é’®
            slot="title/footer" 
            
      ç¯å¢ƒå˜é‡
          å¼€å‘ç¯å¢ƒè®¾ç½®ç¯å¢ƒå˜é‡
             1:åœ¨readmeåŒçº§ç›®å½•åˆ›å»ºä¸€ä¸ª.env.developmentæ–‡ä»¶
             2:å®šä¹‰å˜é‡  VUE_APP_å¼€å¤´
             è®¿é—®:process.env.VUE_APP_åå­—
          ç”Ÿäº§ç¯å¢ƒè®¾ç½®ç¯å¢ƒå˜é‡
             1:åœ¨readmeåŒçº§ç›®å½•åˆ›å»ºä¸€ä¸ª.env.productionæ–‡ä»¶
             2:å®šä¹‰å˜é‡  VUE_APP_å¼€å¤´
             è®¿é—®:process.env.VUE_APP_åå­—
            
            
      
~~~







## æ³¨å†Œæ¨¡å— - å›¾å½¢ç éªŒè¯ç åŸºæœ¬åŠŸèƒ½å®ç°

> é€šè¿‡åˆ—åç§»æ¥å®ç°æ³¨å†ŒåŒºåŸŸçš„å°é—´éš™

æ­¥éª¤ï¼š

1. æ‰¾åˆ° æ³¨å†Œå¯¹è¯æ¡†çš„ éªŒè¯ç  å’Œ è·å–éªŒè¯ç æŒ‰é’®åŒºåŸŸ
2. ä½¿ç”¨`:offset`è®¾ç½®1å³å¯
3. ä¿è¯æ•´ä½“çš„å’Œä¸º24

æ³¨æ„:

1. å±æ€§è®¾ç½® ä¸åŠ :ä¼šè§£æä¸º `å­—ç¬¦ä¸²`ï¼ŒåŠ äº†ä¼šè§£æä¸º `js`

html

~~~html
     <el-form-item label="å›¾å½¢ç " prop="code">
        <el-row>
          <el-col :span="16">
            <el-input v-model="form.code"></el-input>
          </el-col>
          <el-col :span="7" :offset="1">
            <img  class="code_img"  alt />
          </el-col>
        </el-row>
      </el-form-item>
      <el-form-item label="éªŒè¯ç " prop="rcode">
        <el-row>
          <el-col :span="16">
            <el-input v-model="form.rcode"></el-input>
          </el-col>
          <el-col :span="7" :offset="1">
            <el-button class="full_btn" @click="getRcode">
              è·å–éªŒè¯ç 
        
            </el-button>
          </el-col>
        </el-row>
      </el-form-item>
~~~

jséƒ¨åˆ†

- dataçš„formä¸­åŠ å…¥ç›¸åº”ç»‘å®šçš„å…ƒç´ 
- å®šä¹‰ç›¸åº”çš„rulesè§„åˆ™

~~~js
       
code: [
          { required: true, message: "è¯·è¾“å…¥éªŒè¯ç ï¼", trigger: "change" }
        ],
        rcode: [
          {
            required: true,
            message: "è¯·è¾“å…¥æ‰‹æœºéªŒè¯ç !",
            trigger: "change"
          }
        ]
~~~





## æ³¨å†Œæ¨¡å— - å›¾ç‰‡éªŒè¯ç åŠŸèƒ½å®ç°

> å›¾ç‰‡éªŒè¯ç åº”è¯¥ä¸æ˜¯å›ºå®šçš„å€¼ï¼Œéœ€è¦é€šè¿‡æ¥å£æ¥è·å–å“¦

æ­¥éª¤:

1. æ³¨å†Œç»„ä»¶å†…
2. é€šè¿‡`ç¯å¢ƒå˜é‡`+`/captcha?type=sendsms`
3. æ‹¼æ¥ä¸ºéªŒè¯ç åœ°å€
4. è®¾ç½®ç»™ éªŒè¯ç å›¾ç‰‡çš„srcå±æ€§
   1. `:src`

- â€‹

## æ³¨å†Œæ¨¡å— - å›¾ç‰‡éªŒè¯ç ç‚¹å‡»åˆ·æ–°

> å¦‚æœçœ‹ä¸æ¸…æ¥šæ–‡å­—ï¼Œç‚¹å‡»å›¾ç‰‡åº”è¯¥ä¼šé‡æ–°è·å–ä¸€å¼ ï¼Œå¦‚ä½•å®ç°å‘¢

éœ€æ±‚: ç‚¹å‡»é‡æ–°è·å–éªŒè¯ç 

æ­¥éª¤:

1. ä¸ºéªŒè¯ç ç»‘å®šç‚¹å‡»äº‹ä»¶

2. é‡æ–°è®¾ç½®éªŒè¯ç çš„åœ°å€ï¼Œä¸ºäº†é¿å…æµè§ˆå™¨ç¼“å­˜ï¼Œéœ€è¦åœ¨åé¢è·Ÿä¸Šéšæœºå€¼

   1. æ—¶é—´æˆ³
   2. éšæœºæ•°

   `html`

~~~html
      <el-form-item label="å›¾å½¢ç " prop="code">
        <el-row>
          <el-col :span="16">
            <el-input v-model="form.code"></el-input>
          </el-col>
          <el-col :span="7" :offset="1">
            <img @click="codeClick" class="registerCode" :src="codeUrl" alt />
          </el-col>
        </el-row>
      </el-form-item>
~~~

`js`

~~~js
    // ç‚¹å‡» åˆ‡æ¢å›¾å½¢éªŒè¯ç 
    codeClick() {
      this.codeUrl =
        process.env.VUE_APP_URL + "/captcha?type=sendsms&t=" + Date.now();
    }
~~~






## æ³¨å†Œæ¨¡å— - çŸ­ä¿¡éªŒè¯ç è·å–

> æ‰‹æœºè·å–çŸ­ä¿¡ï¼Œè¿™é‡Œéœ€è¦å’ŒæœåŠ¡å™¨è¿›è¡Œäº¤äº’äº†ï¼Œæœ¬åœ°æ¥å£ä¼šç›´æ¥è¿”å›éªŒè¯ç 



éœ€æ±‚:

1. ç‚¹å‡»åº•éƒ¨çš„è·å–éªŒè¯ç æŒ‰é’®ï¼Œè°ƒç”¨æ¥å£ï¼Œå°†çŸ­ä¿¡å’ŒéªŒè¯ç å‘åˆ°æœåŠ¡å™¨
2. è·å–çŸ­ä¿¡éªŒè¯ç 

æ­¥éª¤:

1. ä¸ºåº•éƒ¨çš„æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶

2. ç‚¹å‡» äº‹ä»¶åœ¨è°ƒç”¨æ¥å£è·å–éªŒè¯ç å‰éœ€è¦å…ˆéªŒè¯æ‰‹æœºå·ä¸å›¾å½¢ç æ˜¯å¦å·²æˆåŠŸå¡«å†™ï¼Œå¯åˆ©ç”¨è¡¨å•å…ƒç´ å±€éƒ¨å®šä¹‰æ–¹å¼æ¥è‡ªå®šä¹‰éªŒè¯

   1. ~~~js
      this.$refs.regirest.validateField(["phone", "code"], error =>error)
      //è¿™åé¢çš„errorå¦‚æœæ²¡è¿”å›é”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¿”å›é”™è¯¯ä¸ºç©ºï¼Œè¯´æ˜éªŒè¯æˆåŠŸ
      ~~~


3. è°ƒç”¨æ¥å£æäº¤æ•°æ®

   1. å®‰è£…axios
   2. å¯¼å…¥ å¹¶è°ƒç”¨æ¥å£
   3. åœ°å€`/sendsms`
   4. æ–¹æ³•:`post`
   5. å‚æ•°:
      1. `code`ï¼šéªŒè¯ç 
      2. `phone`ï¼šæ‰‹æœºå·
   6. è·¨åŸŸè°ƒç”¨æ¥å£æ—¶ï¼Œå¦‚æœæ¶‰åŠåˆ°`cookie`ï¼Œå¿…é¡»è®¾ç½®ä¸€ä¸ªå±æ€§

4. å›è°ƒå‡½æ•°ä¸­ï¼Œè·å–åˆ°éªŒè¯ç 

   1. åœ¨çº¿æ¥å£çŸ­ä¿¡è·å–éªŒè¯ç 

![image-20200814105144440](day03 - é»‘é©¬é¢é¢.assets/image-20200814105144440.png)

![image-20200814111010005](day03 - é»‘é©¬é¢é¢.assets/image-20200814111010005.png)

![image-20200814111057975](day03 - é»‘é©¬é¢é¢.assets/image-20200814111057975.png)





## æ³¨å†Œæ¨¡å— - çŸ­ä¿¡è·å–å€’è®¡æ—¶

> ä¸ºäº†é˜²æ­¢æ­£å¸¸ç”¨æˆ·çš„è¯¯æ“ä½œï¼ŒçŸ­ä¿¡çš„è·å–åŠ ä¸Šæ—¶é—´é—´éš”ï¼Œä¸¤æ¬¡è·å–çš„éœ€è¦æœ‰æ—¶é—´é—´éš”

æ­¥éª¤:

1. è·å–çŸ­ä¿¡éªŒè¯ç å†…éƒ¨å¼€å¯å®šæ—¶å™¨
2. æ—¶é—´ï¼ˆ60ç§’ï¼‰é€’å‡
3. å€’è®¡æ—¶ç»“æŸä¹‹å‰ï¼ŒæŒ‰é’®ä¸èƒ½å†æ¬¡è¢«ç‚¹å‡»ï¼Œçœ‹èµ·æ¥ä¹Ÿæ˜¯ç¦ç”¨çŠ¶æ€
   1. æ­£å¸¸:`ç‚¹å‡»è·å–éªŒè¯ç `
   2. å€’è®¡æ—¶:`è¿˜æœ‰XXç§’ç»§ç»­è·å–`



```javascript
<template>
  <el-dialog
    title="æ”¶è´§åœ°å€"
    :visible.sync="dialogFormVisible"
    class="register"
    :show-close="false"
    width="600px"
  >
    <h1 slot="title" class="dialogTitle">ç”¨æˆ·æ³¨å†Œ</h1>
    <el-form :model="form" :rules="rules" ref="form" label-width="120px">
      <el-form-item label="å¤´åƒ" prop="avatar">
        <el-upload
          class="avatar-uploader"
          :action="uploadUrl"
          name="image"
          :show-file-list="false"
          :on-success="handleAvatarSuccess"
          :before-upload="beforeAvatarUpload"
        >
          <img v-if="imageUrl" :src="imageUrl" class="avatar" />
          <i v-else class="el-icon-plus avatar-uploader-icon"></i>
        </el-upload>
      </el-form-item>
      <el-form-item label="æ˜µç§°" prop="username">
        <el-input v-model="form.username"></el-input>
      </el-form-item>
      <el-form-item label="é‚®ç®±" prop="email">
        <el-input v-model="form.email"></el-input>
      </el-form-item>
      <el-form-item label="æ‰‹æœº" prop="phone">
        <el-input v-model="form.phone"></el-input>
      </el-form-item>
      <el-form-item label="å¯†ç " prop="password">
        <el-input v-model="form.password"></el-input>
      </el-form-item>
      <el-form-item label="å›¾å½¢ç " prop="code">
        <el-row>
          <el-col :span="16">
            <el-input v-model="form.code"></el-input>
          </el-col>
          <el-col :span="7" :offset="1">
            <img @click="codeClick" class="registerCode" :src="codeUrl" alt />
          </el-col>
        </el-row>
      </el-form-item>
      <el-form-item label="éªŒè¯ç " prop="rcode">
        <el-row>
          <el-col :span="16">
            <el-input v-model="form.rcode"></el-input>
          </el-col>
          <el-col :span="7" :offset="1">
            <el-button @click="getRcode" :disabled="timeout>0 && timeout<60">
              è·å–éªŒè¯ç 
              <span v-if="timeout>0 && timeout<60">{{timeout}}</span>
            </el-button>
          </el-col>
        </el-row>
      </el-form-item>
    </el-form>
    <div slot="footer" class="dialog-footer">
      <el-button @click="dialogFormVisible = false">å– æ¶ˆ</el-button>
      <el-button type="primary" @click="submitClick">ç¡® å®š</el-button>
    </div>
  </el-dialog>
</template>
<script>
import axios from "axios";
export default {
  data() {
    return {
      dialogFormVisible: false,
      //å¤´åƒä¸Šä¼ åœ°å€
      uploadUrl: process.env.VUE_APP_URL + "/uploads",
      // å›¾å½¢éªŒè¯ç åœ°å€
      codeUrl: process.env.VUE_APP_URL + "/captcha?type=sendsms",
      // å‘é€çŸ­ä¿¡éªŒè¯ç 60ç§’ä¸å…è®¸ å†è°ƒç”¨
      timeout: 60,
      form: {
        avatar: "", //ç”¨æˆ·å¤´åƒ
        username: "", //ç”¨æˆ·æ˜µç§°
        email: "", //é‚®ç®±
        phone: "", //æ‰‹æœº
        password: "", //å¯†ç 
        code: "", //å›¾å½¢ç 
        rcode: "" //æ‰‹æœºéªŒè¯ç 
      },
      rules: {
        avatar: [{ required: true, message: "è¯·ä¸Šä¼ å¤´åƒ", trigger: "change" }],
        username: [
          { required: true, message: "è¯·è¾“å…¥ç”¨æˆ·åç§°", trigger: "change" }
        ],
        email: [
          { required: true, message: "è¯·è¾“å…¥é‚®ç®±", trigger: "change" },
          {
            validator: (rule, value, callback) => {
              let _reg = /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
              if (_reg.test(value)) {
                callback();
              } else {
                callback("è¯·æ­£ç¡®è¾“å…¥é‚®ç®±");
              }
            },
            trigger: "change"
          }
        ],
        phone: [
          { required: true, message: "è¯·è¾“å…¥æ‰‹æœº", trigger: "change" },
          {
            validator: (rule, value, callback) => {
              let _reg = /^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/;
              if (_reg.test(value)) {
                callback();
              } else {
                callback("è¯·æ­£ç¡®è¾“å…¥æ‰‹æœº");
              }
            },
            trigger: "change"
          }
        ],
        password: [
          { required: true, message: "è¯·è¾“å…¥å¯†ç ", trigger: "change" },
          { min: 6, max: 12, message: "è¯·è¾“å…¥6-12ä½å¯†ç ", trigger: "chnage" }
        ],
        code: [
          { required: true, message: "è¯·è¾“å…¥å›¾å½¢ç ", trigger: "change" },
          { min: 4, max: 4, message: "è¯·è¾“å…¥4ä½å›¾å½¢ç ", trigger: "chnage" }
        ]
      },
      imageUrl: "" //å›¾åƒæœ¬åœ°
    };
  },
  methods: {
    handleAvatarSuccess(res, file) {
      window.console.log(file);
      this.imageUrl = URL.createObjectURL(file.raw);
      this.form.avatar = res.data.file_path;
      this.$refs.form.validateField("avatar");
    },
    beforeAvatarUpload(file) {
      window.console.log(file);
      const isJPG = file.type === "image/jpeg";
      const isLt2M = file.size / 1024 / 1024 < 2;

      if (!isJPG) {
        this.$message.error("ä¸Šä¼ å¤´åƒå›¾ç‰‡åªèƒ½æ˜¯ JPG æ ¼å¼!");
      }
      if (!isLt2M) {
        this.$message.error("ä¸Šä¼ å¤´åƒå›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 2MB!");
      }
      return isJPG && isLt2M;
    },
    // ç¡®å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶
    submitClick() {
      this.$refs.form.validate(result => {
        window.console.log(result);
      });
    },
    // ç‚¹å‡» åˆ‡æ¢å›¾å½¢éªŒè¯ç 
    codeClick() {
      this.codeUrl =
        process.env.VUE_APP_URL + "/captcha?type=sendsms&t=" + Date.now();
    },
    // è·å–éªŒè¯ç ç‚¹å‡»
    getRcode() {
      let _isPass =0;
      this.$refs.form.validateField(["phone", "code"], error => {
        if (error == "") {
          _isPass ++;
        }
      });
      if (_isPass !== 2) {
        return;
      } else {
        this.timeout--;
        let interTime = setInterval(() => {
          this.timeout--;
          if (this.timeout == 0) {
            this.timeout = 60;
            clearInterval(interTime);
          }
        }, 1000);

        // è°ƒç”¨æ¥å£è·å–æ‰‹æœºéªŒè¯ç 
        axios({
          url: process.env.VUE_APP_URL + "/sendsms",
          method: "post",
          data: {
            code: this.form.code,
            phone: this.form.phone
          },
          withCredentials: true //è·¨åŸŸå¸¦cookie
        }).then(res => {
          this.$message.success(res.data.data.captcha + "");
          window.console.log(res);
        });
      }
    }
  }
};
</script>
<style lang="less">
.register {
  .el-dialog__header {
    padding: 0;
  }
  .dialogTitle {
    text-align: center;
    color: #fff;
    height: 53px;
    background-color: rgb(14, 156, 250);
    font-size: 18px;
    line-height: 53px;
  }
  .avatar-uploader {
    width: 178px;
    margin: 0 auto;
    .el-upload {
      border: 1px dashed #d9d9d9;
      border-radius: 6px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    .el-upload:hover {
      border-color: #409eff;
    }
    .avatar-uploader-icon {
      font-size: 28px;
      color: #8c939d;
      width: 178px;
      height: 178px;
      line-height: 178px;
      text-align: center;
    }
    .avatar {
      width: 178px;
      height: 178px;
      display: block;
    }
  }
  .registerCode {
    width: 100%;
    height: 40px;
    border: 1px dashed #ccc;
  }
}
</style>
```

## æ³¨å†Œæ¨¡å— - çŸ­ä¿¡è·å–å€’è®¡æ—¶

>ä¸ºäº†é˜²æ­¢ç”¨äºé¢‘ç¹ç‚¹å‡»è·å– éªŒè¯ç ï¼ŒåŠ ä¸€äº›å‰ç«¯ é™åˆ¶ 

1. é¦–å…ˆå®šä¹‰ä¸€ä¸ªå€’è®¡æ—¶æ—¶é—´  totalTime=60
2. ç‚¹å‡» è·å– éªŒè¯ç è°ƒç”¨æ¥å£å‰è¿›è¡Œå€’è®¡æ—¶ï¼ŒsetInterval    totalTime--
3. å½“totalTime<0   æ¸…é™¤å€’è®¡æ—¶clearInterval     totalTime=60
4. é™åˆ¶ ä¸€ä¸‹æŒ‰é’®ç‚¹å‡»åŠŸèƒ½åœ¨ç›¸åº”æŒ‰é’®ä¸ŠåŠ ä¸Šä¸€ä¸ªdisabled=''totalTime!=60"

~~~js
        // å€’è®¡æ—¶åŠŸèƒ½
        this.totalTime--;
        let _interval = setInterval(() => {
          this.totalTime--;
          if (this.totalTime <= 0) {
            clearInterval(_interval);
            this.totalTime = 60;
          }
        }, 1000);
~~~

~~~html
      <!-- éªŒè¯ç  -->
      <el-form-item label="éªŒè¯ç " prop="rcode">
        <el-row>
          <el-col :span="16">
            <el-input v-model="form.rcode"></el-input>
          </el-col>
          <el-col :span="7" :offset="1">
            <el-button @click="getRecode" :disabled="totalTime!=60">
              è·å–éªŒè¯ç 
              <span v-if="totalTime!=60">{{totalTime}}</span>
            </el-button>
          </el-col>
        </el-row>
      </el-form-item>
~~~

![image-20200814120447161](day03 - é»‘é©¬é¢é¢.assets/image-20200814120447161.png)

![image-20200814120533380](day03 - é»‘é©¬é¢é¢.assets/image-20200814120533380.png)



![image-20200814120610305](day03 - é»‘é©¬é¢é¢.assets/image-20200814120610305.png)







## exportåŸºæœ¬ç”¨æ³•

è·¯ç”±æå–ï¼š export default   router

å…¶å®ƒåœ°æ–¹ä½¿ç”¨  import router from 'è·¯å¾„'   åå­—=å€¼



node  

  è¾“å‡º:module.exports={}

å¯¼å…¥:  let å˜é‡ = require(è·¯å¾„)









export default  è¾“å‡º äº†ä¸€ä¸ªä¸œè¥¿





export 



å¯¹è±¡è§£æ„èµ‹å€¼

~~~js
let {a,b}={a:10,b:20}
a=10
b=20 
let {a,b}={c:20}
a:undefined
b:undefined
let {a=100,b}={a:undefined,b:20}
//è§£æ„è¿‡ç¨‹ä¸­,å¦‚æœè§£æ„çš„å˜é‡æœ‰é»˜è®¤å€¼,ä½†æ˜¯å®ƒè§£æ„åçš„å€¼ä¸ºundefined,å®ƒä¼šå–å®ƒçš„é»˜è®¤å€¼
a=100
b=20
~~~

åœ¨jsä¸­ä½¿ç”¨export 

- export { a}    export {b}   
- å®ƒæ˜¯ä¸importå¯¹åº”ä½¿ç”¨   import {a}  from "export js"
- å®ƒä»¬äºŒä¸ªä¹‹é—´å°±æ˜¯ä¸€ä¸ªè§£æ„èµ‹å€¼     {a}  =    {a,b}
- æ³¨æ„ç‚¹ï¼šå‘½åæ–¹é¢éœ€è¦ä¸€æ ·ï¼Œexportå¯ä»¥å†™å¤šä¸ª



exportä¸export defaultåŒºåˆ«

- exportå¯ä»¥å†™å¤šä¸ªï¼Œä½†æ˜¯export defaultåªèƒ½å†™ä¸€ä¸ª
- å¯¼å…¥æ—¶ï¼Œexport ç›¸å½“äºæ˜¯ä¸€ä¸ªè§£æèµ‹å€¼åŒ¹é…è¿‡ç¨‹
- export defaultåªæ˜¯ä¸€ä¸ªèµ‹å€¼è¿‡ç¨‹  
- export çš„å€¼åœ¨importçš„æ—¶å€™åå­—ä¸€å®šè¦å¯¹åº”ä¸Š
- export defaultå¯ä»¥ä¸ç”¨å¯¹åº”ä¸Šï¼Œè€Œä¸”ä¸éœ€è¦æ‹¬å·

## æ³¨å†Œæ¨¡å— - æ³¨å†Œæ¥å£æŠ½å–

> å¦‚æœæ•°æ®çš„æ ¡éªŒèƒ½å¤Ÿé€šè¿‡ï¼Œé‚£ä¹ˆå°±æŠŠæ•°æ®æäº¤åˆ°æœåŠ¡å™¨å³å¯ï¼Œè¿™é‡Œæ¶‰åŠåˆ°æ¥å£çš„è°ƒç”¨ï¼Œå°†ä»–æŠ½å–ä¸ºæ–¹æ³•ï¼Œæ–¹ä¾¿è°ƒç”¨

æ­¥éª¤:

1. æ ¹æ®æ¥å£æ–‡æ¡£ï¼ŒæŠ½å–æ³¨å†Œæ¥å£ä¸ºæ–¹æ³•
2. è¯·æ±‚å‚æ•°ï¼Œä½œä¸ºæ–¹æ³•çš„å‚æ•°ä¼ é€’
3. æš´éœ²å‡ºæ¥æ–¹ä¾¿åç»­è°ƒç”¨
4. ä½ç½®`/api/register.js`

~~~js
import axios from "axios"
const instance = axios.create({
    baseURL: process.env.VUE_APP_URL,
    withCredentials: true
})
// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(function (config) {
    window.console.log(config)
    // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
    return config;
}, function (error) {
    // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
    return Promise.reject(error);
});
// æ·»åŠ å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(function (response) {
    console.log('å“åº”æ‹¦æˆªå™¨')
    console.log(response)
    // å¯ä»¥å¯¹å“åº”çš„å€¼è¿›è¡Œä¸€äº›å¤„ç†
    // return response;
    return response.data
}, function (error) {
    // å¯ä»¥åœ¨è¿™é‡Œå¯¹é”™è¯¯è¿›è¡Œä¸€äº›å¤„ç†
    return Promise.reject(error);
});
function sendsms(data) {
    return instance({
        url: "/sendsms",
        method: "post",
        data: data,
    })
}
function register(data) {
    return instance({
        url: "/register",
        method: "post",
        data,
    })
}
export { sendsms, register }

~~~

![image-20200814150227132](day03 - é»‘é©¬é¢é¢.assets/image-20200814150227132.png)

![image-20200814150250669](day03 - é»‘é©¬é¢é¢.assets/image-20200814150250669.png)

![image-20200814150315433](day03 - é»‘é©¬é¢é¢.assets/image-20200814150315433.png)



## æ³¨å†Œæ¨¡å—-æ³¨å†ŒåŠŸèƒ½å®ç°

>ä½¿ç”¨åˆšæ‰å®šä¹‰çš„apiæ³¨å†Œæ–¹æ³•ï¼Œå®Œæˆæ³¨å†ŒåŠŸèƒ½

1. å¯¼å…¥ç›¸åº”æ³¨å†Œapiæ–¹æ³•

   ~~~js
   import { sendsms, register } from "@/api/register.js";
   ~~~

2. åœ¨ç‚¹å‡»ç¡®å®šæŒ‰é’®æ—¶ï¼Œåœ¨è¡¨å•éªŒè¯é€šè¿‡äº†åè¿›è¡Œæ³¨å†Œæ¥å£è°ƒç”¨

   è°ƒç”¨æ¥å£å½“æˆåŠŸæ—¶ï¼Œæ¸…é™¤è¡¨å•æ•°æ®ï¼ŒåŒæ—¶å…³é—­å¼¹çª—ï¼Œæç¤ºæ³¨å†ŒæˆåŠŸ

   ~~~js
       // ç¡®å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶
       submitClick() {
         this.$refs.form.validate(result => {
           if (result) {
             register(this.form).then(res => {
               window.console.log("æ³¨å†Œè¿”å›ä¿¡æ¯:", res);
               if (res.code == 200) {
               //æç¤ºæ³¨å†ŒæˆåŠŸ
                 this.$message.success("æ³¨å†ŒæˆåŠŸ");
                 //å…³é—­å¼¹çª—
                 this.dialogFormVisible = false;
               }
             });
           }
         });
       },
   ~~~

![image-20200814154434350](day03 - é»‘é©¬é¢é¢.assets/image-20200814154434350.png)

![image-20200814154501891](day03 - é»‘é©¬é¢é¢.assets/image-20200814154501891.png)

![image-20200814154530382](day03 - é»‘é©¬é¢é¢.assets/image-20200814154530382.png)



## ä¾¦å¬å™¨

>watchï¼šå¯ä»¥ä¾¦å¬æŸä¸ªæ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–ä¼šç«‹åˆ»è°ƒç”¨ç›¸å…³å‡½æ•°

**åŸºæœ¬æ•°æ®çš„ä¾¦å¬**

```javascript
watch:{
        // watchè¦ç›‘å¬çš„å€¼è¦å†™æˆå­—ç¬¦ä¸²ï¼Œä¸”ä¸ç”¨this
    //1ï¼šå†™å‡ºé‚£ä¸ªå€¼
    //2ï¼šå»æ‰this
    //3:å†™æˆå­—ç¬¦ä¸²
    //åé¢å‡½æ•°è·ŸäºŒä¸ªå€¼ï¼Œä¸€ä¸ªæ˜¯newValueæ˜¯ç›®å‰çš„å€¼ï¼Œåé¢è¿˜æœ‰ä¸€ä¸ªoldValueå°±æ˜¯ä¿®æ”¹å‰çš„å€¼
    //åªè¦ç›‘å¬çš„å€¼æœ‰å˜åŒ– ï¼Œå°±ä¼šè°ƒç”¨åé¢çš„å‡½æ•°
    "æ•°æ®å":function(newVal,oldVal){
        
        //newValæ˜¯æ–°çš„æ•°æ®ï¼ŒoldValæ˜¯æ²¡ä¿®æ”¹å‰çš„æ•°æ®
        //è¿™é‡Œå¯ä»¥æ‰§è¡Œæ•°æ®å˜åŠ¨åçš„å¤„ç†
    }
}
```







## å…³é—­é¡µé¢æ—¶ï¼Œæ¸…ç©ºè¡¨å•æ•°æ®

>å¾€å¾€å®é™…ä½¿ç”¨ä¸­ï¼Œåœ¨å…³é—­å¼¹çª—æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•°æ®ç½®ç©º

å…³é—­å¼¹çª—ï¼Œå®ƒå…¶å®ä¸€å®šä¼šä¿®æ”¹ä¸€ä¸ªå€¼ï¼Œå°±æ˜¯å¼¹çª—çš„:visible.syncçš„å€¼ï¼Œ

å…¶å®æˆ‘ä»¬åªéœ€è¦å¯¹è¯¥å€¼åšä¸ªwatchå¤„ç†ï¼Œå°±å¯ä»¥äº†

watchè§‚å¯ŸæŸä¸ªå€¼æ”¹å˜äº†ï¼Œå¯ä»¥åšä¸€äº›ç›¸åº”å¤„ç†

~~~js
  watch: {
    dialogFormVisible(newVal) {
      if (newVal == false) {
        // æ¸…ç©ºè¡¨å•
        this.$refs.form.resetFields();
        // å°†å›¾ç‰‡ç½®ç©º
        this.imageUrl = "";
      }
    }
  },
~~~





## axiosä¹‹create,æ‹¦æˆªå™¨

>axiosè¿›ä¸€æ­¥åŠ æ·±ç†è§£ 

get è¯·æ±‚å¯ç”¨æ¥å£ï¼š https://autumnfish.cn/api/joke/list?num=10

createåˆ›å»ºä¸€ä¸ªaxiosçš„å‰¯æœ¬ï¼Œè‡ªå®šä¹‰ä¸€äº›axiosä¸€äº›é»˜è®¤å±æ€§

~~~
let  interface=axios.create({
//è‡ªå®šä¹‰çš„ä¸€äº›é…åˆ¶
baseURL:"åŸºåœ°å€"
timeout:30000
})
interfaceå°±ç›¸å½“äºæ˜¯axioså‰¯æœ¬
~~~

~~~js
        let interface = axios.create({
            baseURL: "https://autumnfish.cn/api/joke"
        })

        // æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
        interface.interceptors.request.use(function (config) {
            // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
            //configæ‰€æœ‰è¯·æ±‚çš„ç›¸å…³ä¿¡æ¯
            window.console.log("æ‹¦æˆªçš„æ•°æ®", config)
            config.url = "/list?num=100"
            return config;
        }, function (error) {
            // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
            return Promise.reject(error);
        });

        // æ·»åŠ å“åº”æ‹¦æˆªå™¨
        interface.interceptors.response.use(function (response) {
            // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
            // responseæ‰€æœ‰è¿”å›çš„ç›¸å…³ä¿¡æ¯
            window.console.log("å“åº”çš„æ•°æ®æ‹¦æˆª", response)
            response.data.jokes = response.data.jokes.slice(0, 1)
            return response;
        }, function (error) {
            // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
            return Promise.reject(error);
        });





        //    interfaceç›¸å½“äºå°±æ˜¯ä¸€ä¸ªå®šä¹‰äº†ä¸€äº›é»˜è®¤å±æ€§çš„axios
        interface({
            url: "/list?num=10"
        }).then(res => {
            window.console.log(res)
        })

~~~





## axios.createçš„æŠ½ç¦»

>ç™»é™†æ¨¡å—ä¸é¦–é¡µæ¨¡å—éƒ½ç”¨åˆ°äº†axios.createï¼Œè¿™ç§ç›¸åŒçš„ä¸œè¥¿æœ€å¥½æŠ½ç¦» 

`/src/utils`ä¸‹åˆ›å»ºrequestçš„js   `require.js`

åœ¨require.jsä¸­å†™å…¥

~~~js
import axios from 'axios'

var instance = axios.create({
    baseURL: process.env.VUE_APP_URL,
    withCredentials: true
});
export default instance
~~~

åœ¨åˆ°ç›¸åº”çš„ç™»é™†æ¨¡å—ä¸é¦–é¡µæ¨¡å—ç›¸åº”apiä¸­å¯¼å…¥instance

~~~
import instance from '@/utils/request.js'
~~~





## axios æ‹¦æˆªå™¨

> æœåŠ¡å™¨å“åº”çš„å†…å®¹æ¯æ¬¡éƒ½å†™ä¸¤æ¬¡`data`,ä¹Ÿæ˜¯å¤šä½™çš„å“¦ , å’±ä»¬é€šè¿‡axiosçš„æ‹¦æˆªå™¨æ¥ä¼˜åŒ–è¿™éƒ¨åˆ†å†…å®¹

[ä¼ é€é—¨](https://github.com/axios/axios#interceptors)

æ¦‚å¿µ:

1. æ‹¦æˆªå™¨æ˜¯`axios`æä¾›ç»™å¼€å‘è€…çš„ä¸€ç»„å›è°ƒå‡½æ•°ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨ç‰¹å®šçš„æ—¶å€™æ·»åŠ è‡ªå®šä¹‰çš„é€»è¾‘
   1. è¯·æ±‚æ‹¦æˆªå™¨
      1. å‘é€è¯·æ±‚çš„æ—¶å€™è§¦å‘çš„å›è°ƒå‡½æ•°
   2. å“åº”æ‹¦æˆªå™¨
      1. æ•°æ®å“åº”å›æ¥ä¹‹åï¼Œè§¦å‘çš„å›è°ƒå‡½æ•°

```javascript
// æ·»åŠ ä¸€ä¸ªè¯·æ±‚æ‹¦æˆªå™¨
// å‘é€è¯·æ±‚æ—¶ï¼Œæ‰§è¡Œäº†ï¼Œ
// config ä¸€äº›é…ç½®ä¿¡æ¯
// å¯ä»¥åŠ¨æ€çš„æ·»åŠ ä¸€äº›è¯·æ±‚å¤´,æ¯”å¦‚æºå¸¦token
axios.interceptors.request.use(function (config) {
    console.log('è¯·æ±‚æ‹¦æˆªå™¨')
    console.log(config)
    config.headers.info="i have a secret"
    config.headers.message="not tell you"
    // åœ¨å‘é€ä¹‹å‰ å¹²ä¸€äº›äº‹æƒ…
    return config;
}, function (error) {
    // å¦‚æœè¯·æ±‚å‡ºé”™äº† å¹²ä¸€äº›äº‹æƒ…
    return Promise.reject(error);
});

// æ³¨å†Œä¸€ä¸ªç›¸åº”æ‹¦æˆªå™¨
// è°ƒç”¨æ¥å£æ—¶.thenæ–¹æ³•æ‰§è¡Œä¹‹å‰ä¼šè§¦å‘çš„å›è°ƒå‡½æ•°
// ç»Ÿä¸€çš„è¿›è¡Œä¸€äº›å¤„ç†ï¼Œæ¯”å¦‚å¼‚å¸¸çš„é”™è¯¯æç¤º
// å¦‚æœä¸æƒ³è¦é¢å¤–çš„.data å¯ä»¥åœ¨returnçš„æ—¶å€™ æŠŠ.dataæ‹¿æ‰
axios.interceptors.response.use(function (response) {
    console.log('å“åº”æ‹¦æˆªå™¨')
    console.log(response)
    // å¯ä»¥å¯¹å“åº”çš„å€¼è¿›è¡Œä¸€äº›å¤„ç†
    // return response;
    return response.data
}, function (error) {
    // å¯ä»¥åœ¨è¿™é‡Œå¯¹é”™è¯¯è¿›è¡Œä¸€äº›å¤„ç†
    return Promise.reject(error);
});
```

## æ³¨å†Œæ¨¡å— - apiæ–¹æ³•æŠ½å–

> ä¹‹å‰axiosæ˜¯ç›´æ¥ä½¿ç”¨çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨æŠ½å–çš„apiæ–¹æ³•æ¥æ›¿æ¢é‚£äº›å†™åœ¨é¡µé¢å†…éƒ¨çš„æ¥å£è°ƒç”¨é€»è¾‘

æ­¥éª¤:

1. ä¸ºäº†æ–¹ä¾¿ç®¡ç†æ¥å£è°ƒç”¨ï¼Œä¸€èˆ¬ä¼šæŠ½å–ä¸ºå‡½æ•°ï¼Œæ ¹æ®æ¨¡å—è¿›è¡ŒæŠ½å–
2. æŠ½å–çš„ä½ç½®ä¸€èˆ¬æ¥è¯´`/src/api/`æ–‡ä»¶å¤¹
3. ä¸åŒçš„æ¨¡å—ï¼Œå®šä¹‰ä¸åŒçš„æ–‡ä»¶ï¼Œ
   1. æ³¨å†Œ:`register.js`
4. å†…éƒ¨é€šè¿‡å‡½æ•°çš„æ–¹å¼æ¥æŠ½å–æ¥å£è°ƒç”¨
5. æš´éœ²å‡ºæ¥   `export`
6. é¡µé¢å†…éƒ¨å¯¼å…¥å¹¶ä½¿ç”¨    import {åå­—}   from 'è·¯å¾„'

~~~js
import axios from "axios"
let instance = axios.create({
    baseURL: process.env.VUE_APP_URL,
    withCredentials: true
})
// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(function (config) {
    window.console.log(config)
    // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
    return config;
}, function (error) {
    // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
    return Promise.reject(error);
});
// æ·»åŠ å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(function (response) {
    console.log('å“åº”æ‹¦æˆªå™¨')
    console.log(response)
    // å¯ä»¥å¯¹å“åº”çš„å€¼è¿›è¡Œä¸€äº›å¤„ç†
    // return response;
    return response.data
}, function (error) {
    // å¯ä»¥åœ¨è¿™é‡Œå¯¹é”™è¯¯è¿›è¡Œä¸€äº›å¤„ç†
    return Promise.reject(error);
});
function sendsms(data) {
    return instance({
        url: "/sendsms",
        method: "post",
        data: data,
    })
}
export { sendsms }

~~~

![image-20200814163504769](day03 - é»‘é©¬é¢é¢.assets/image-20200814163504769.png)



![image-20200814163548961](day03 - é»‘é©¬é¢é¢.assets/image-20200814163548961.png)



![image-20200814163615674](day03 - é»‘é©¬é¢é¢.assets/image-20200814163615674.png)

## apiå…¨å±€å¤„ç†å“åº”é”™è¯¯æ‹¦æˆª

> æ ¹æ®å…¨å±€çš„apié”™è¯¯ç¼–ç æç¤ºï¼Œåœ¨å“åº”æ‹¦æˆªå…¨å±€å¤„ç†ç›¸åº”é”™è¯¯

![image-20200325140840638](day03 - é»‘é©¬é¢é¢.assets/image-20200325140840638.png)

1. åœ¨jsä¸­ä½¿ç”¨elementç»„ä»¶

   1. å¯¼å…¥ç›¸åº”ç»„ä»¶

      ~~~
      import { Message } from 'element-ui'
      ~~~

   2. è°ƒç”¨ç›¸åº”ç»„ä»¶ï¼Œè¿™é‡Œçš„`Message`ç›¸å½“äº`this.$message`

      ~~~
      Message.error("è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯ï¼")
      ~~~

2. å¤„ç†æ¥å£å“åº”æ‹¦æˆª

   ~~~js
   /*
   æ¥å£è°ƒç”¨ï¼›
   1ï¼šå®‰è£…axios   npm i axios
   2:å¯¼å…¥axios    import axios from 'axios
   3:ä½¿ç”¨axiosè°ƒç”¨æ¥å£
   */

   import axios from 'axios'
   import { Message } from 'element-ui';
   var instance = axios.create({
       baseURL: process.env.VUE_APP_URL,   //è®¾ç½®åŸºåœ°å€
       withCredentials: true //è·¨åŸŸç…§æ ·åå¸¦cookie
   });
   // æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
   instance.interceptors.request.use(function (config) {
       // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
       return config;
   }, function (error) {
       // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
       return Promise.reject(error);
   });

   // æ·»åŠ å“åº”æ‹¦æˆªå™¨
   instance.interceptors.response.use(function (response) {
       // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
       if (response.data.code == 200) {
           // å› ä¸ºè¿”å›æ•°æ®é‡Œé¢axioså¸®æˆ‘ä»¬é¢å¤–çš„åŒ…äº†ä¸€å±‚dataä½†å®é™…æˆ‘ä»¬åŸºæœ¬ä¸ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒå¹²æ‰
           return response.data;
       } else {
           // æç¤ºç”¨æˆ·é”™è¯¯
           // å‡ºé”™äº†æˆ‘ä»¬è¿˜æœ‰å¿…è¦è¿”å›æ•°æ®å‡ºå»å—ï¼Ÿ
           //æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œä¸è¦è®©åé¢ä»£ç æ‰§è¡Œ
           //åªè¦returnäº†ä¸€ä¸ªPromise.reject("error")åé¢çš„æ¥å£çš„.thenå°±ä¸ä¼šæ‰§è¡Œäº†
           Message.error(response.data.message)
           return Promise.reject("error");
       }
       // switch (response.data.code) {
       //     case 200:
       //         return response;
       //     case 201:

       //         Message.error(response.data.message)
       //         // å‡ºé”™äº†æˆ‘ä»¬è¿˜æœ‰å¿…è¦è¿”å›æ•°æ®å‡ºå»å—ï¼Ÿ
       //         //æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œä¸è¦è®©åé¢ä»£ç æ‰§è¡Œ
       //         window.console.log("æŠ›é”™è¯¯å‰å¤„ç†:", response)
       //         return Promise.reject("error");

       // }

       // return response;
   }, function (error) {
       // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
       return Promise.reject(error);
   });


   function getPhoneCode(data) {
       return instance({
           url: "/sendsms",
           method: "post",
           data      //data: data   
       })
   }

   function register(data) {
       return instance({
           url: "/register",
           method: "post",
           data      //data: data   
       })
   }

   ~~~



- ## gitå†²çª


gitåˆå¹¶å†²çª:git push   git pull ä¹Ÿä¸èƒ½ç”¨äº†  

git pull====  git fetch   git merge åˆ†æ”¯å(æ‹‰å–çš„åˆ†æ”¯åˆå¹¶åˆ°å½“å‰ä½ èƒ½å»)

![image-20200923164356879](day03 - é»‘é©¬é¢é¢.assets/image-20200923164356879.png)

å‡ºç°è¿™ä¸ªè¡¨ç¤º å†²çª

1. å…ˆä¿å­˜å†²çªæ–‡ä»¶(å¤åˆ¶å‡ºæ¥ä¿ç•™ä¸€ä¸‹)

2. git merge --abort   å–æ¶ˆå…¨å¹¶

3. ä¿æŒäºŒè¾¹ä»£ç ä¸€è‡´å°±è§£å†³å†²çª

   1. å¦‚æœä½ ä¿®æ”¹çš„ä»£ç åªæœ‰å†²çªæ–‡ä»¶,

      1. git reset --hard origin/master  é‡ç½®å½“å‰ä»£ç ä¸ºæœåŠ¡å™¨ä»£ç 
      2. æ‹¿å‡ºå†²çªå¤‡ä»½çš„æ–‡ä»¶,è§£å†³å†²çªå¹¶æ›¿æ¢é¡¹ç›®ä¸­çš„å†²çªæ–‡ä»¶
      3. git add .   git commit -m    git push

   2. å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†å¤šä¸ªæ–‡ä»¶,å†²çªæ–‡ä»¶åªæœ‰ä¸€ä¸ª

      1. å›åˆ°add ä¸commit å‰çŠ¶æ€(å–æ¶ˆäº†commit å¤„ç†)

      2. git reset HEAD^  å›åˆ°ä¸Šä¸€æ¬¡commitæäº¤

      3. git checkout --  æ–‡ä»¶è·¯å¾„     å–æ¶ˆè¯¥æ–‡ä»¶çš„ä¿®æ”¹

      4. git pull  æ‹‰å–æœåŠ¡å™¨ä»£ç 

      5. æ‹¿å‡ºå†²çªå¤‡ä»½çš„æ–‡ä»¶,è§£å†³å†²çªå¹¶æ›¿æ¢é¡¹ç›®ä¸­çš„å†²çªæ–‡ä»¶

      6. git add .

      7. git commit -m"æ³¨é‡Š"

      8. git push






